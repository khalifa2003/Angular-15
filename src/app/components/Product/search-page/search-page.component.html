<div class="row">
  <div class="col-2">
    <app-side-filter
      *ngIf="brands"
      [categories]="categories"
      [brands]="brands"
    ></app-side-filter>
  </div>

  <div class="col-10">
    <div class="card">
      <div class="card-body">
        <p-dataView
          #dv
          [value]="products"
          [paginator]="true"
          [rows]="20"
          [sortField]="sortField"
          [sortOrder]="sortOrder"
          layout="grid"
        >
          <ng-template pTemplate="header">
            <div class="flex flex-row md:flex-row md:justify-content-between">
              <!-- [(ngModel)]="sortKey" -->
              <p-dropdown
                [options]="sortOptions"
                placeholder="Sort By Price"
                (onChange)="onSortChange($event)"
                styleClass="mb-2 md:mb-0"
              ></p-dropdown>
              <span class="p-input-icon-left mb-2 md:mb-0">
                <i class="pi pi-search"></i>
                <input type="search" pInputText placeholder="Search by Name" />
                <!-- (input)="dv.filter($event.target.value)" -->
              </span>
              <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
            </div>
          </ng-template>

          <ng-template let-product pTemplate="listItem">
            <div class="col-12">
              <div class="d-flex align-items-center border-bottom py-3">
                <img
                  [src]="product.images[0]"
                  width="200px"
                  [alt]="product.title"
                />
                <div class="flex-grow-1">
                  <div class="h5">{{ product.title }}</div>
                  <p-rating
                    [ngModel]="product.ratingsAvrage"
                    [readonly]="true"
                    [cancel]="false"
                  ></p-rating>
                  <p class="text-muted">
                    <i class="pi pi-tag me-2"></i>
                    {{ product.category.name }}
                  </p>
                </div>
                <div class="text-end">
                  <div class="h5">${{ product.price }}</div>
                  <p-button
                    icon="pi pi-shopping-cart"
                    label="Add to Cart"
                    [disabled]="product.quantity == 0"
                    class="btn-sm"
                  ></p-button>
                  <div class="mt-2">
                    <!-- <span
                      class="badge bg-secondary"
                      [class]="
                        'status-' + product.inventoryStatus.toLowerCase()
                      "
                    >
                      {{ product.inventoryStatus }}
                    </span> -->
                  </div>
                </div>
              </div>
            </div>
          </ng-template>

          <ng-template let-product pTemplate="gridItem">
            <div class="col-12 col-md-6 col-lg-3 col-xl-2 p-2">
              <div class="card h-100">
                <div class="card-body d-flex flex-column">
                  <div
                    class="d-flex justify-content-between align-items-center border-bottom mb-3"
                  >
                    <div class="text-muted">
                      <i class="pi pi-tag me-2"></i>
                      {{ product.category.name }}
                    </div>
                    <span class="badge bg-danger" [class]="'status-onstock'">
                      {{ product.quantity }}
                    </span>
                  </div>
                  <img
                    [src]="product.images[0]"
                    [alt]="product.title"
                    class="img-fluid mb-3"
                    style="
                      height: 200px;
                      object-fit: cover;
                      background-color: red;
                    "
                  />
                  <div class="text-center flex-grow-1">
                    <h5 class="product-title">{{ product.title }}</h5>
                    <p-rating
                      [ngModel]="product.ratingsAverage"
                      [readonly]="true"
                      [cancel]="false"
                    ></p-rating>
                  </div>
                </div>
                <div
                  class="card-footer bg-transparent border-0 d-flex justify-content-between align-items-center"
                >
                  <span class="h5 mb-0">${{ product.price }}</span>
                  <p-button
                    icon="pi pi-shopping-cart"
                    [disabled]="product.quantity == 0"
                    class="btn-sm"
                  ></p-button>
                </div>
              </div>
            </div>
          </ng-template>
        </p-dataView>
      </div>
    </div>
  </div>
</div>
